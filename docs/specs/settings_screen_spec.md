# SnatchTradingChatApp 設定画面仕様書

## 1. 概要
本ドキュメントは、SnatchTradingChatAppの設定画面に関する仕様を定義します。

## 2. UI/UXデザイン
- **デザイン形式**: iOS設定アプリ風のリスト形式
- **ナビゲーション**: 階層型リスト構造

## 3. 設定項目構成

### 3.1 一般ユーザー向け設定

```
設定
├── アカウント
│   ├── プロフィール編集
│   │   ├── 表示名
│   │   ├── 自己紹介
│   │   └── プロフィール画像
│   ├── アバター変更
│   └── X（Twitter）連携管理
│       ├── 連携状態の確認
│       └── 連携解除
│
├── 通知
│   ├── プッシュ通知（マスターON/OFF）
│   ├── 通知カテゴリ設定
│   │   ├── メッセージ通知
│   │   ├── メンション通知
│   │   ├── リアクション通知
│   │   ├── チャンネル更新通知
│   │   └── 記事投稿通知
│   ├── チャンネル別通知設定
│   │   └── 各チャンネルのON/OFF
│   ├── ユーザー別通知設定
│   │   ├── 通知ミュートリスト
│   │   └── ミュート追加/解除
│   └── キーワード通知
│       ├── キーワード登録
│       └── キーワード一覧管理
│
├── セキュリティ
│   └── パスワード変更
│
├── サブスクリプション
│   ├── 現在のプラン
│   │   ├── プラン名
│   │   ├── 次回更新日
│   │   └── 料金
│   ├── 支払い方法
│   │   ├── カード情報管理
│   │   └── 支払い方法変更
│   └── 請求履歴
│
└── その他
    ├── アプリ情報
    │   ├── バージョン情報
    │   └── アップデート確認
    ├── 利用規約
    ├── プライバシーポリシー
    └── ログアウト
```

### 3.2 管理者専用設定

```
管理者設定
├── ユーザー管理
│   ├── ユーザー一覧
│   │   ├── 検索/フィルター機能
│   │   └── ユーザー詳細表示
│   ├── ユーザー権限変更
│   │   ├── 権限レベル設定
│   │   └── チャンネル別権限設定
│   ├── ユーザーブロック/解除
│   ├── 入退会ログ
│   │   ├── ログ一覧表示
│   │   ├── 期間指定フィルター
│   │   └── CSVエクスポート
│   └── アクティビティログ
│       ├── ユーザー行動履歴
│       └── CSVエクスポート
│
├── システム設定
│   ├── チャンネル管理
│   │   ├── チャンネル作成/編集/削除
│   │   ├── チャンネル権限設定
│   │   └── チャンネル参加者管理
│   ├── ボット設定
│   │   ├── ボット一覧
│   │   ├── ボット作成/編集
│   │   ├── 実行スケジュール設定
│   │   └── Webhook管理
│   ├── 記事管理
│   │   ├── 記事一覧
│   │   ├── 記事作成/編集/削除
│   │   └── 公開設定管理
│   └── システムログ
│       ├── エラーログ
│       ├── アクセスログ
│       └── システム稼働状況
│
└── コミュニティ設定
    ├── コミュニティ情報編集
    ├── 参加条件設定
    └── お知らせ管理
```

## 4. データ管理方針

### 4.1 ローカルストレージで管理
- 通知のON/OFF状態（キャッシュ）
- 最後に開いた設定画面の位置
- 一時的なフォーム入力データ
- 表示設定（あれば）

### 4.2 サーバーで管理
- プロフィール情報全般
- セキュリティ設定全般
- 通知設定の詳細（チャンネル別、ユーザー別、キーワード等）
- サブスクリプション情報
- 管理者設定全般
- ユーザーアクティビティログ

## 5. 実装上の注意点

### 5.1 権限管理
- 管理者設定は、ユーザーの権限レベルを確認してから表示
- 権限のないユーザーがアクセスした場合はエラー画面を表示

### 5.2 データ同期
- ローカルとサーバーのデータは定期的に同期
- オフライン時は、ローカルの設定を優先し、オンライン復帰時に同期

### 5.3 セキュリティ
- パスワード変更、2段階認証設定時は再認証を要求
- セッション管理画面では、現在のセッションを明確に表示

### 5.4 CSVエクスポート機能
- 管理者のみアクセス可能
- エクスポート実行履歴を記録
- 大量データの場合は非同期処理で実装

## 6. 画面遷移フロー

1. タブバーの「設定」をタップ
2. 設定メイン画面表示（リスト形式）
3. 各項目タップで詳細画面へ遷移
4. 詳細画面で設定変更
5. 保存ボタンまたは自動保存で設定を反映

## 7. エラーハンドリング

- ネットワークエラー時：ローカル保存して後で同期
- 権限エラー時：適切なエラーメッセージを表示
- 入力値エラー時：リアルタイムバリデーション

## 8. 今後の拡張性

- 表示設定（テーマ、フォントサイズ等）の追加
- 言語設定の追加
- データエクスポート/インポート機能
- 設定のバックアップ/復元機能
